---
import Layout from '@/layouts/Layout.astro'
import ProductDetail from '@/components/products/ProductDetail.astro'
import pb, { filecdn } from '@/lib/pb'
import type { RecordModel } from 'pocketbase'
const { col = 'FURNITURE', id = 'yivca5y7aebs6ub' } = Astro.params

const { name, images, model, details }= await pb
  .collection(col.toUpperCase())
  .getOne(id)
  .catch((e) => ({}) as RecordModel)
---

<Layout>
  <ProductDetail
    title={name}
    subtitle={model}
    views={4}
    details={details}
    images={images?.map((src: string) => filecdn(col.toUpperCase(), id, src))}
  />
</Layout>
